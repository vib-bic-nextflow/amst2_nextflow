Bootstrap: docker
From: continuumio/miniconda3

%files

%runscript
exec "$@"

%environment
CONDA_BIN_PATH="/opt/conda/bin"    
export PATH="$CONDA_BIN_PATH:$PATH"
export PATH="/opt/conda/envs/squirrelenv/bin:$PATH"

%post   
apt-get update -y   
apt install -y build-essential
export PATH="/opt/conda/bin:$PATH"      
conda create --name squirrelenv python==3.11 -c conda-forge
pip install --upgrade pip
git clone https://github.com/jhennies/squirrel /squirrel
cd /squirrel
/opt/conda/envs/squirrelenv/bin/pip install -e .
/opt/conda/envs/squirrelenv/bin/pip install  'numpy<2.0' transform3d SimpleITK-SimpleElastix pyaml
conda install opencv vigra pandas -c conda-forge    

